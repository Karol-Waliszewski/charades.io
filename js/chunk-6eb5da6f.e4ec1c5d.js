(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6eb5da6f"],{"2f21":function(t,e,s){"use strict";var i=s("79e5");t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},"2fdb":function(t,e,s){"use strict";var i=s("5ca1"),n=s("d2c8"),r="includes";i(i.P+i.F*s("5147")(r),"String",{includes:function(t){return!!~n(this,t,r).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"3ab1":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section-xs container"},[s("div",{staticClass:"columns is-multiline"},[s("div",{staticClass:"column is-full"},[t.room?s("h1",{staticClass:"title is-2 has-text-centered"},[t._v(t._s(t.room.name.toUpperCase()))]):t._e(),t.room?s("h2",{staticClass:"subtitle is-4 has-text-centered"},[t._v(t._s(parseInt(t.time/60))+":"+t._s(t.time%60<=9?"0"+t.time%60:t.time%60))]):t._e()]),s("div",{staticClass:"column is-3"},[s("div",{staticClass:"card"},[s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Players: "+t._s(t.users.length))])]),s("div",{staticClass:"card-content"},[t.showUsers?s("ul",{staticClass:"content playerlist"},t._l(t.sortedUsers,function(e){return t.painter==e.id?s("li",{key:e.id},[s("strong",[t._v(t._s(e.name)+" ✏️")]),t._v(" :\n              "),s("span",{staticClass:"has-text-weight-bold"},[t._v(t._s(e.points))])]):s("li",{key:e.id},[t._v("\n              "+t._s(e.name)+" :\n              "),s("span",{staticClass:"has-text-weight-bold"},[t._v(t._s(e.points))])])}),0):t._e()]),s("footer",{staticClass:"card-footer"},[s("router-link",{staticClass:"card-footer-item has-text-danger is-hoverable",attrs:{to:"/rooms"}},[t._v("Leave Room")])],1)]),t.iDraw&&!t.roundStarted&&t.words.length>0?s("div",{staticClass:"card card--painter"},[s("header",{staticClass:"card-header"},[s("div",{staticClass:"card-header-title"},[s("p",[t._v("Choose next password")]),s("span",[t._v(t._s(t.wordTime)+"s")])])]),s("div",{staticClass:"card-content"},[s("ul",{staticClass:"content"},t._l(t.words,function(e){return s("li",{key:e},[s("button",{staticClass:"button is-fullwidth is-word",on:{click:function(){t.chooseWord(e)}}},[t._v(t._s(e))])])}),0)])]):t._e(),t.iDraw&&t.roundStarted?s("div",{staticClass:"card card--painter"},[t._m(0),s("div",{staticClass:"card-content"},[s("p",{staticClass:"content"},[t._v(t._s(t.password))])])]):t._e()]),s("whiteboard",{attrs:{iDraw:t.iDraw}}),s("div",{staticClass:"column is-3",attrs:{id:"chat"}},[s("div",{staticClass:"card chat"},[t._m(1),s("div",{ref:"chat",staticClass:"chat-body"},[s("ul",{staticClass:"chat-messages"},t._l(t.messages,function(e){return s("li",{key:e.id,staticClass:"chat-message"},["server"!=e.sender?s("span",{staticClass:"has-text-weight-bold"},[t._v(t._s(e.sender)+":")]):t._e(),"server"==e.sender?s("span",[s("strong",[t._v(t._s(e.msg))])]):s("span",[t._v(t._s(" "+e.msg))])])}),0)]),s("footer",{staticClass:"card-footer"},[s("form",{staticClass:"field has-addons chat-input",on:{submit:t.sendMessage}},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"input is-borderless",attrs:{type:"text",placeholder:"Send a message..."},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})]),t._m(2)])])])])],1)])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("div",{staticClass:"card-header-title"},[s("p",[t._v("Your secret password")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Chat")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"control"},[s("input",{staticClass:"button is-primary is-borderless",attrs:{type:"submit",value:"Send"}})])}],r=(s("55dd"),s("6762"),s("2fdb"),s("96cf"),s("3b8d")),a=(s("cadf"),s("551c"),s("f751"),s("097d"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"column is-6"},[s("div",{staticClass:"card whiteboard-wrapper"},[s("canvas",{ref:"canvas",staticClass:"whiteboard",attrs:{height:"600",width:"800"},on:{mousemove:t.emitLine}}),t.iDraw?s("footer",{staticClass:"card-footer whiteboard-footer"},[s("button",{staticClass:"button",on:{click:t.clearBoard}},[t._v("Clear")])]):t._e()])])}),o=[],c=s("5d73"),u=s.n(c),d={name:"Whiteboard",data:function(){return{prevPos:{x:null,y:null},ctx:null,draw:!1}},props:["iDraw"],methods:{clearBoard:function(){this.$socket.emit("clear")},drawLine:function(t){var e=this.ctx;e.beginPath(),e.moveTo(t.prevPos.x,t.prevPos.y),e.lineTo(t.currPos.x,t.currPos.y),e.stroke()},emitLine:function(t){if(this.draw&&this.iDraw){var e=this.getMousePosition(this.$refs.canvas,t);null!=this.prevPos.x&&null!=this.prevPos.y&&this.$socket.emit("paint",{prevPos:this.prevPos,currPos:e}),this.prevPos.x=e.x,this.prevPos.y=e.y}},enableDrawing:function(){this.draw=!0},disableDrawing:function(){this.draw=!1,this.prevPos.x=null,this.prevPos.y=null},getTouchPosition:function(t){if(this.iDraw){t.preventDefault(),t.stopPropagation();var e=t.touches[0],s=new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY});this.emitLine(s)}},getMousePosition:function(t,e){var s=t.getBoundingClientRect(),i=t.width/s.width,n=t.height/s.height;return{x:(e.clientX-s.left)*i,y:(e.clientY-s.top)*n}},addEvents:function(){window.addEventListener("mousedown",this.enableDrawing),window.addEventListener("touchstart",this.enableDrawing),window.addEventListener("mouseup",this.disableDrawing),window.addEventListener("touchend",this.disableDrawing),this.$refs.canvas.addEventListener("touchmove",this.getTouchPosition,!1)},removeEvents:function(){window.removeEventListener("mousedown",this.enableDrawing),window.removeEventListener("touchstart",this.enableDrawing),window.removeEventListener("mouseup",this.disableDrawing),window.removeEventListener("touchend",this.disableDrawing)}},sockets:{paint:function(t){t&&this.drawLine(t)},getPainting:function(t){var e=!0,s=!1,i=void 0;try{for(var n,r=u()(t);!(e=(n=r.next()).done);e=!0){var a=n.value;this.drawLine(a)}}catch(o){s=!0,i=o}finally{try{e||null==r.return||r.return()}finally{if(s)throw i}}},clear:function(){this.ctx.clearRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height)}},mounted:function(){this.ctx=this.$refs.canvas.getContext("2d"),this.addEvents()},destroyed:function(){this.removeEvents()}},l=d,h=(s("5515"),s("2877")),f=Object(h["a"])(l,a,o,!1,null,null,null),v=f.exports,m={name:"About",data:function(){return{users:[],showUsers:!1,room:null,message:"",messages:[],painter:null,words:[],iDraw:!1,password:null,roundStarted:!1,time:0,wordTime:0}},components:{Whiteboard:v},methods:{joinRoom:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e="",this.room.users.includes(this.$socket.id)||!this.room.isPrivate){t.next=5;break}return t.next=4,this.getPassword();case 4:e=t.sent;case 5:return t.next=7,this.getName();case 7:s=t.sent,this.$socket.emit("setName",s),this.$socket.name=s,this.showUsers=!0,this.$socket.emit("join_room",{id:this.$route.params.id,password:e});case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getUsers:function(){this.$socket.emit("get_users")},getRoomInfo:function(){this.$socket.emit("get_room",this.$route.params.id)},getName:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$swal({title:"Enter your name",input:"text",showCancelButton:!1,inputPlaceholder:"Your name is...",inputAttributes:{autocapitalize:"off",autocorrect:"off"}});case 2:return e=t.sent,t.abrupt("return",e.value);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getPassword:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$swal({title:"Enter your password",input:"password",showCancelButton:!0,inputPlaceholder:"Enter your password",inputAttributes:{autocapitalize:"off",autocorrect:"off"}});case 2:return e=t.sent,s=e.value,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),sendMessage:function(t){t.preventDefault(),0!=this.message.length&&(this.$socket.emit("send_message",this.message),this.message="")},chooseWord:function(t){this.$socket.emit("word_chosen",t)},setPainter:function(t){this.painter=t,this.iDraw=t==this.$socket.id},scrollChat:function(){var t=this;this.$nextTick(function(){t.$refs.chat.scrollTo(0,t.$refs.chat.scrollHeight)})}},sockets:{receive_users:function(t){this.users=t},receive_users_error:function(t){this.$swal({title:t,type:"error"})},join_room_error:function(t){this.$swal({title:t,type:"error"}),this.$router.push("/rooms")},receive_room:function(t){t?(this.room=t,this.setPainter(t.painter),this.getUsers(),this.joinRoom()):(this.$swal({title:"This room does not exist",type:"error"}),this.$router.push("/rooms"))},receive_message:function(t){this.messages.push(t),this.scrollChat()},receive_server_message:function(t){this.messages.push({sender:"server",msg:t}),this.scrollChat()},receive_callback:function(t){this.messages.push({sender:"server",msg:t}),this.scrollChat()},receive_password:function(t){this.password=t},round_initialized:function(t){this.words=t},round_started:function(){this.roundStarted=!0,this.words=[]},round_stopped:function(){this.roundStarted=!1},painter_changed:function(t){this.setPainter(t)},countdown:function(t){this.time=t},countdown_painter:function(t){this.wordTime=t}},computed:{sortedUsers:function(){return this.users.sort(function(t,e){return e.points-t.points})}},mounted:function(){this.getRoomInfo()},watch:{"$route.params.id":function(t){this.messages=[],this.getRoomInfo()}}},p=m,w=(s("724a"),Object(h["a"])(p,i,n,!1,null,"6d5c69ca",null));e["default"]=w.exports},"469f":function(t,e,s){s("6c1c"),s("1654"),t.exports=s("7d7b")},"4ce9":function(t,e,s){},5147:function(t,e,s){var i=s("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(s){try{return e[i]=!1,!"/./"[t](e)}catch(n){}}return!0}},5515:function(t,e,s){"use strict";var i=s("676d"),n=s.n(i);n.a},"55dd":function(t,e,s){"use strict";var i=s("5ca1"),n=s("d8e8"),r=s("4bf8"),a=s("79e5"),o=[].sort,c=[1,2,3];i(i.P+i.F*(a(function(){c.sort(void 0)})||!a(function(){c.sort(null)})||!s("2f21")(o)),"Array",{sort:function(t){return void 0===t?o.call(r(this)):o.call(r(this),n(t))}})},"5d73":function(t,e,s){t.exports=s("469f")},6762:function(t,e,s){"use strict";var i=s("5ca1"),n=s("c366")(!0);i(i.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")("includes")},"676d":function(t,e,s){},"724a":function(t,e,s){"use strict";var i=s("4ce9"),n=s.n(i);n.a},"7d7b":function(t,e,s){var i=s("e4ae"),n=s("7cd6");t.exports=s("584a").getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},aae3:function(t,e,s){var i=s("d3f4"),n=s("2d95"),r=s("2b4c")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==n(t))}},d2c8:function(t,e,s){var i=s("aae3"),n=s("be13");t.exports=function(t,e,s){if(i(e))throw TypeError("String#"+s+" doesn't accept regex!");return String(n(t))}}}]);
//# sourceMappingURL=chunk-6eb5da6f.e4ec1c5d.js.map